# Разработка плагинов

Плагины призваны выполнять узкую специфическую задачу, которую по определённым
причинам невозможно включить в саму платформу:

- Плагины могут работать с внутренней инфраструктурой, эти процессы нельзя
  делать частью OSS-решения.
- Плагины могут решать задачи связанные со специфической обработкой данных. Этот
  процесс может быть уникален для вашей компании или защищён патентами, что
  делает невозможным включение этого функцонала в ядро платформы.

## Формат плагинов

Плагины представляют собой исполняемый файл `main` и располагаются в собственном
подкаталоге каталога `~/.platformctl/plugin`.

Имя подкаталога плагина формируется по шаблону:

```
platformctl-plugin-PLUGIN_NAME
```

Плагин может быть написан на любом языке программирования.

Имя плагина следует выбирать так, чтобы оно отражало назначение и было легко
запоминающимя.

## Пример плагина

Для демонстрации процесса создания плагина реализуем пример.

Создадим отдельный репозиторий или каталог для проекта плагина и назовём
его `platformctl-plugin-shell-showcase`:

```shell
mkdir platformctl-plugin-shell-showcase
```

В новом каталоге создадим файл `main`:

```shell title="main"
#!/usr/bin/env bash

set -euo pipefail

echo Hello, I am example shell plugin!
echo Current PWD: ${PWD}
echo Given args: "$@"
```

Добавим флаг `+x` на файл `main`:

```shell
chmod +x main
```

Перенесём его в каталог с плагином:

```shell
cp -R ../platformctl-plugin-shell-showcase ~/.platformctl/plugin
```

И попробуем запустить:

```shell
platformctl plugin shell-showcase --hello plugin
```

Если всё сделано правильно, плагин выведет следующую информацию:

```
Using config file: /Users/<your-username>/.platformctl/platformctl.yaml
Hello, I am example shell plugin!
Given args: --hello plugin
```
