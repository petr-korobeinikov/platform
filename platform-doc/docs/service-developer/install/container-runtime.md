# Установка среды исполнения контейнеров

Существует несколько вариантов установки среды исполнения контейнеров.

Выберите **один**, который подходит вам.

!!! note

    Рекомендуемый и основной поддерживаемый — `minikube`.

## minikube

`asdf-vm` — наиболее удобный способ установки `minikube`.

Выполните следующие команды:

```shell
asdf plugin add minikube
asdf install minikube latest
```

В последующих версиях возможна автоматизация установки `minikube` с указанием
точной версии.

Поддержка различных виртуальных машин на данный момент находится в проработке.
Из-за невозможности исследовать работу на процессорах M1, основной вариант
— `VirtualBox`.

### Установка `VirtualBox` на `macOS`

```shell
brew install --cask virtualbox
```

После завершения установки разрешите использование плагина ядра
в [Security & Privacy](x-apple.systempreferences:com.apple.preference.security)
и перезагрузите компьютер.

Если ссылка не работает, выполните команду:

```shell
open "x-apple.systempreferences:com.apple.preference.security"
```

Или зайдите в настройки безопасности.

### Почему не `hyperkit`?

К сожалению, `hyperkit` не работает на M1. Его поддержка проста, он
легче `VirtualBox`, но на данный момент не может быть поддержан.

## Docker Desktop

Преимущества:

- Самый простой и быстрый способ.
- Использует для развёртывания `docker compose` — подходит для простых сервисов.

Недостатки:

- Не позволяет разворачивать одновременно несколько сервисов.
- Для доступности команды `docker compose` на `Linux` требуется дополнительная
  настройка [^docker-compose-setup].

### Установка Docker Desktop на macOS

Для установки `Docker Desktop` на `macOS` выполните команду:

```shell
brew install --cask docker
```

## Rancher Desktop

Преимущества:

- Свободен от проблем с лицензированием, как `Docker Desktop`.
- Позволяет выбирать среду исполнения контейнеров. На данный момент
  поддерживаются `moby` и `containerd`.
- Для простых сервисов можно использовать `docker compose` и `nerdctl compose`.

Недостатки:

- Медленнее синхронизирует файловую систему контейнера с хост-машиной. Это
  заметно невооружённым глазом. Гибкая настройка в интерфейсе пользователя не
  предоставлена.
- Медленнее запускается, чем `Docker Desktop`, и одновременно с запуском среды
  исполнения контейнеров запускает локальную версию `kubernetes` внутри
  виртуальной машины.

К сожалению, на данный момент `Rancher Desktop` существенно
проигрывает `Docker Desktop` по комфортности работы.

!!! note

    Из-за невысокой распространённости `Rancher Desktop` среди разработчиков
    (на данный момент), его интеграция не поддерживается актвно.

    Приходите с вопросами и проблемами, попробуем решить.

### Установка Rancher Desktop на macOS

`Rancher Desktop` конфликтует с `Docker Desktop` из-за символических ссылок на
исполняемые файлы `docker` и `kubectl` (если последний устанавливается) в
каталоге `/usr/loca/bin` хост-машины.

Прежде, чем устанавливать `Rancher Desktop`, удалите `Docker Desktop` с вашего
компьютера:

```shell
brew uninstall --cask docker
brew cleanup
```

Для установки `Rancher Desktop` на `macOS`
выполните команду:

```shell
brew install --cask rancher
```

[^docker-compose-setup]: [Настройка команды `docker compose`](https://docs.docker.com/compose/cli-command/#install-on-linux)
