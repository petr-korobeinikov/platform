# Манифест сервиса

Манифест сервиса `service.yaml` является основным источником информации о
сервисе.

Он находится в корне репозитория с сервисом
и может быть изменен вручную разработчиком.

## Пример манифеста `service.yaml`

```yaml
name: wordcounter

environment:
  _:
    WORKER_BATCH_SIZE: 10
    WORKER_NAP_DURATION: 1s
  staging:
    WORKER_NAP_DURATION: 10s
  prod:
    WORKER_NAP_DURATION: 30s

component:
  - type: postgres
    name: postgres
    enabled: true
```

## Структура манифеста

### name

Имя сервиса уникально в рамках инсталляции платформы.

```yaml
name: wordcounter
```

### environment

Определение переменных окружения сервиса.

Блок `_` определяет переменные окружения, доступные во всех средах.

Переменная окружения может быть переопределена для определённого окружения.

Согласно "12 факторам" вся конфигурация сервиса
происходит только через переменные окружения.

```yaml
environment:
  _:
    WORKER_BATCH_SIZE: 10
    WORKER_NAP_DURATION: 1s
  staging:
    WORKER_NAP_DURATION: 10s
  prod:
    WORKER_NAP_DURATION: 30s
```

### component

Компоненты сервиса, необходимые для его эксплуатации, например,
базы данных, брокеры очередей сообщений, системы кэширования и прочее.

Типы компонентов определяются платформой.

Имена компонентов определяются разработчиками сервиса.
К сервису может быть подключено несколько компонентов одного типа.
Например, это могут быть `OLTP`- и `OLAP`-база одного типа.

```yaml
component:
  - type: postgres
    name: postgres
    enabled: true
```
